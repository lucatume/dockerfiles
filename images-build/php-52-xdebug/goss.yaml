file:
  /usr/local/etc/php/conf.d/memcache.ini:
    exists: true
    filetype: file
    contains:
      {{if getEnv "MEMCACHE_DISABLE" | eq "1"}}
        - ";extension=" # should be deactivated
      {{else}}
        - "!;extension=" # should be activated
        - "extension="
      {{end}}
  /usr/local/etc/php/conf.d/opcache.ini:
    exists: true
    filetype: file
    contains:
      {{if getEnv "OPCACHE_DISABLE" | eq "1"}}
        - ";zend_extension=" # should be deactivated
      {{else}}
        - "!;zend_extension=" # should be activated
        - "zend_extension="
      {{end}}
        - opcache.validate_timestamps=1
        - opcache.revalidate_freq=2
  /usr/local/etc/php/conf.d/xdebug.ini:
    exists: true
    filetype: file
    contains:
      {{if getEnv "XDEBUG_DISABLE" | eq "1"}}
        - ";zend_extension=" # should be deactivated
      {{else}}
        - "!;zend_extension=" # should be activated
        - "zend_extension="
      {{end}}
      {{if getEnv "XDEBUG_REMOTE_HOST" | eq ""}}
        - xdebug.remote_host=127.0.0.1
      {{else}}
        - xdebug.remote_host={{getEnv "XDEBUG_REMOTE_HOST"}}
      {{end}}
      {{if getEnv "XDEBUG_REMOTE_PORT" | eq ""}}
        - xdebug.remote_port=9001
      {{else}}
        - xdebug.remote_port={{getEnv "XDEBUG_REMOTE_PORT"}}
      {{end}}
port:
  tcp:9000:
    listening: true
    ip:
    - 0.0.0.0
process:
  php-cgi:
    running: true
