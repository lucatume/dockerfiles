file:
  /etc/nginx/conf.d/default.conf:
    exists: true
    filetype: file
    contains:
      {{if getEnv "DOMAIN" | eq ""}}
        - "server_name wp.localhost *.wp.localhost" # default host
      {{else}}
        - "!server_name wp.localhost *.wp.localhost" # no default host
        - "server_name {{getEnv "DOMAIN"}} *.{{getEnv "DOMAIN"}}" # specified host
      {{end}}
port:
  tcp:80:
    listening: true
    ip:
    - 0.0.0.0
process:
  nginx:
    running: true
http:
  http://localhost:
    status: 200
    timeout: 5000
    body:
      - Hello from Nginx container and PHP
